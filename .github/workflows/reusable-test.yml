name: Reusable test

on:
  workflow_dispatch:

jobs:
  tag:
    uses: test-org-fanna/.github/.github/workflows/generate-tag.yml@main

  docker: #repeat this if there are multiple file names #TODO: regex check on filename
    uses: test-org-fanna/.github/.github/workflows/docker-build-and-push.yml@main
    with:
      tag: "test" #TODO: output of tag job above
      dockerfile_name: Dockerfile
    secrets:
      docker_hub_username: ${{ secrets.DOCKER_HUB_USERNAME }}
      docker_hub_token: ${{ secrets.DOCKER_HUB_ACCESS_TOKEN }}
      docker_secret_1: ${{ secrets.FIRST_ENV }}
      docker_secret_2: ${{ secrets.SECOND_ENV }}